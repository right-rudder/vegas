---
import { FaArrowRight } from "react-icons/fa";
import ImageComp from "./ImageComp.astro";

const { data } = Astro.props;
---

<section class="relative isolate overflow-hidden bg-accent-100 text-accent-900">
  <div class="mx-auto max-w-7xl px-5 py-16 md:px-8 lg:px-10">
    <!-- Header -->
    <div class="text-center max-w-4xl mx-auto mb-16">
      <p class="eyebrow-dark inline-flex items-center gap-2 tracking-widest">
        {data.eyebrow}
      </p>
      <h2 class="mt-4 text-4xl font-extrabold leading-tight tracking-tight sm:text-5xl lg:text-6xl">
        {data.title}
      </h2>
      <p class="mt-6 text-lg md:text-xl text-accent-700">
        {data.subTitle}
      </p>
    </div>

    <!-- Steps -->
    <div class="space-y-16 lg:space-y-24">
      {
        data.steps.map((step: any, index: number) => (
          <div
            class={`flex flex-col lg:flex-row items-center gap-8 lg:gap-12 ${index % 2 === 1 ? "lg:flex-row-reverse" : ""}`}
          >
            {/* Image */}
            <div class="w-full lg:w-1/2">
              <div class="relative aspect-4/3 overflow-hidden rounded-lg shadow-xl">
                <ImageComp src={step.image.src} alt={step.image.alt} class="h-full w-full object-cover object-center" />
                {/* Step number overlay */}
                <div class="absolute top-6 left-6 flex items-center justify-center size-16 rounded-full bg-primary-700 text-white font-bold text-2xl shadow-lg font-force-roboto">
                  {(index+1).toString().padStart(2, '0')}
                </div>
              </div>
            </div>

            {/* Content */}
            <div class="w-full lg:w-1/2">
              <h3 class="text-3xl font-bold leading-tight sm:text-4xl">{step.title}</h3>
              <p class="mt-4 text-lg text-accent-700 leading-relaxed whitespace-pre-line" set:html={step.description} />
              {step.cta && (
                <a href={step.cta.url} class="mt-6 btn-primary w-fit">
                  {step.cta.text}
                  <FaArrowRight />
                </a>
              )}
            </div>
          </div>
        ))
      }
    </div>

    <!-- Bottom CTA -->
    {
      data.cta && (
        <div class="mt-16 text-center">
          <a href={data.cta.url} class="btn-primary mx-auto w-fit">
            {data.cta.text}
            <FaArrowRight />
          </a>
        </div>
      )
    }
  </div>
</section>
