---
import { type CollectionEntry, getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Banner from "../../components/Banner.astro";
import CTAIntroFlight from "../../components/CTAIntroFlight.astro";
import FAQs from "../../components/FAQs.astro";
import CenteredSection from "../../components/flight-training/CenteredSection.astro";
import CostSection from "../../components/flight-training/CostSection.astro";
import SectionDivider from "../../components/flight-training/SectionDivider.astro";

export async function getStaticPaths() {
  const programs = await getCollection("flight-training");
  return programs.map((program) => ({
    params: { slug: program.id },
    props: program,
  }));
}

type Props = CollectionEntry<"flight-training">;

const program = Astro.props;
---

<!-- TODO : Define which section divider structure to use -->

<BaseLayout
  siteTitle={program.data.siteTitle}
  siteDescription={program.data.siteDescription}
  siteKeywords={program.data.siteKeywords}
>
  <Banner data={program.data.header} slot="hero" />

  <div class="bg-accent-900">
    {program.data.sections.map((item: any) => (
      <CenteredSection data={item} />
      <SectionDivider />
    ))}
  
    {program.data.faqs && (
      <FAQs faqs={program.data.faqs} />
    )}
    <!-- <SectionDivider />  -->
  
    {program.data.costs && (
      <CostSection data={program.data.costs} />
    )}
    <!-- <SectionDivider /> -->
  
    <CTAIntroFlight />
  </div>

</BaseLayout>
